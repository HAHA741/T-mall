import{a as w,c as F,b as z,F as N,G as T,H as A,d as M,e as L,f as P,g as K,A as j}from"./element-plus@2.3.6_vue@3.2.47-2ccbbec5.js";import{b as G,w as E}from"./@vue_runtime-dom@3.2.47-65c92196.js";import{h as d,a as B}from"./index-ac6793f4.js";import{D as H}from"./debounce-d39f6322.js";import{r as _,j as R,u as t,i as Y}from"./@vue_reactivity@3.2.47-b35eb3c0.js";import{o as g,c as $,e as l,L as o,a as J,P as p,n as O,K as y,O as x,Y as Q}from"./@vue_runtime-core@3.2.47-7772318f.js";import"./lodash-es@4.17.21-53d52778.js";import"./@vue-eb92069c.js";import"./@ctrl_tinycolor@3.6.1-93e5f6fc.js";import"./@vueuse_core@9.13.0_vue@3.2.47-f8689e2f.js";import"./@vueuse_shared@9.13.0_vue@3.2.47-4c633672.js";import"./@vue_shared@3.2.47-804b7488.js";import"./@element-plus_icons-vue@2.1.0_vue@3.2.47-c959b2bd.js";import"./@sxzz_popperjs-es@2.11.7-eb0a044a.js";import"./dayjs@1.11.13-e8f4b8a8.js";import"./async-validator@4.2.5-940bb5fd.js";import"./memoize-one@6.0.0-43ba193c.js";import"./escape-html@1.0.3-d65727e0.js";import"./normalize-wheel-es@1.2.0-fb80f16a.js";import"./@floating-ui_dom@1.6.12-11ac7818.js";import"./@floating-ui_core@1.6.8-010b5758.js";import"./@floating-ui_utils@0.2.8-6db9c233.js";import"./lodash-unified@1.0.3_@types_lodash-es@4.17.12_lodash-es@4.17.21_lodash@4.17.21-d8bd5cdb.js";import"./vue@3.2.47-3eac09d8.js";import"./pinia@2.0.33_vue@3.2.47-da3f2561.js";import"./vue-demi@0.14.10_vue@3.2.47-71ba0ef2.js";import"./moment@2.29.4-4717c495.js";import"./vue-router@4.1.6_vue@3.2.47-3725844c.js";import"./vue-cookies@1.8.3-b35a0960.js";import"./axios@1.3.4-4a7005d9.js";import"./qs@6.11.1-8e85f023.js";import"./side-channel@1.0.6-025da103.js";import"./get-intrinsic@1.2.4-25c259ca.js";import"./es-errors@1.3.0-82fd953f.js";import"./has-symbols@1.0.3-8f82dcae.js";import"./has-proto@1.0.3-1353c55e.js";import"./function-bind@1.1.2-61637ca6.js";import"./hasown@2.0.2-42bc0a75.js";import"./call-bind@1.0.7-82cb89a2.js";import"./set-function-length@1.2.2-7418ecdf.js";import"./define-data-property@1.1.4-53ade537.js";import"./es-define-property@1.0.0-8178d4b8.js";import"./gopd@1.0.1-6433dd40.js";import"./has-property-descriptors@1.0.2-f195ed7c.js";import"./object-inspect@1.13.3-0d0634c3.js";import"./crypto-js@4.1.1-0f0eb29b.js";import"./lodash@4.17.21-08c1e7a6.js";import"./@smallwei_avue@3.5.6_element-plus@2.3.6_vue@3.2.47-c4df20a4.js";const W={searchMenuSpan:6,columnBtn:!1,border:!0,index:!1,selection:!0,indexLabel:"序号",stripe:!0,menuAlign:"center",align:"center",addBtn:!1,editBtn:!1,delBtn:!1,column:[{label:"热搜标题",prop:"title",search:!0},{label:"热搜内容",prop:"content",search:!0},{label:"录入时间",prop:"recDate",sortable:!0},{label:"顺序",prop:"seq",sortable:!0},{label:"启用状态",prop:"status",type:"select",slot:!0,search:!0,dicData:[{label:"未启用",value:0},{label:"启用",value:1}]}]},X={class:"mod-hotSearch-add-or-update"},Z={class:"dialog-footer"},ee={__name:"add-or-update",emits:["refreshDataList"],setup(q,{expose:V,emit:h}){const r=_({hotSearchId:0,title:"",content:"",recDate:"",seq:0,status:0}),b=R({total:0,currentPage:1,pageSize:10}),m=_(!1),C={title:[{required:!0,message:"标题不能为空",trigger:"blur"},{min:1,max:50,message:"长度在1到50个字符内",trigger:"blur"},{pattern:/\s\S+|S+\s|\S/,message:"标题不能为空",trigger:"blur"}],content:[{required:!0,message:"内容不能为空",trigger:"blur"},{min:1,max:255,message:"长度在1到255个字符内",trigger:"blur"},{pattern:/\s\S+|S+\s|\S/,message:"内容不能为空",trigger:"blur"}]},S=_(null);V({init:v=>{r.value.hotSearchId=v||0,m.value=!0,O(()=>{var e;(e=S.value)==null||e.resetFields(),r.value.hotSearchId&&d({url:d.adornUrl("/admin/hotSearch/info/"+r.value.hotSearchId),method:"get",params:d.adornParams()}).then(({data:c})=>{r.value=c})})}});const k=H(()=>{var v;(v=S.value)==null||v.validate(e=>{if(e){const c=r.value;d({url:d.adornUrl("/admin/hotSearch"),method:c.hotSearchId?"put":"post",data:d.adornData(c)}).then(()=>{w({message:"操作成功",type:"success",duration:1500,onClose:()=>{m.value=!1,h("refreshDataList",b)}})})}})});return(v,e)=>{const c=F,a=z,n=N,s=T,u=A,D=M,f=L,U=P;return g(),$("div",X,[l(U,{modelValue:t(m),"onUpdate:modelValue":e[7]||(e[7]=i=>Y(m)?m.value=i:null),title:t(r).hotSearchId?"修改":"新增","close-on-click-modal":!1},{footer:o(()=>[J("div",Z,[l(f,{onClick:e[5]||(e[5]=i=>m.value=!1)},{default:o(()=>[p(" 取消 ")]),_:1}),l(f,{type:"primary",onClick:e[6]||(e[6]=i=>t(k)())},{default:o(()=>[p(" 确定 ")]),_:1})])]),default:o(()=>[l(D,{ref_key:"dataFormRef",ref:S,model:t(r),rules:C,"label-width":"80px",onKeyup:e[4]||(e[4]=G(i=>t(k)(),["enter"]))},{default:o(()=>[l(a,{label:"标题",prop:"title"},{default:o(()=>[l(c,{modelValue:t(r).title,"onUpdate:modelValue":e[0]||(e[0]=i=>t(r).title=i),"controls-position":"right",min:0,maxlength:"50","show-word-limit":"",label:"标题"},null,8,["modelValue"])]),_:1}),l(a,{label:"内容",prop:"content"},{default:o(()=>[l(c,{modelValue:t(r).content,"onUpdate:modelValue":e[1]||(e[1]=i=>t(r).content=i),"controls-position":"right",type:"textarea",min:0,maxlength:"255","show-word-limit":"",label:"内容"},null,8,["modelValue"])]),_:1}),l(a,{label:"排序号",prop:"seq"},{default:o(()=>[l(n,{modelValue:t(r).seq,"onUpdate:modelValue":e[2]||(e[2]=i=>t(r).seq=i),"controls-position":"right",min:0,label:"排序号"},null,8,["modelValue"])]),_:1}),l(a,{label:"状态",prop:"status"},{default:o(()=>[l(u,{modelValue:t(r).status,"onUpdate:modelValue":e[3]||(e[3]=i=>t(r).status=i)},{default:o(()=>[l(s,{label:0},{default:o(()=>[p(" 下线 ")]),_:1}),l(s,{label:1},{default:o(()=>[p(" 正常 ")]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue","title"])])}}},te={class:"mod-hotSearcch"},Qe={__name:"index",setup(q){const V=_([]),h=R({total:0,currentPage:1,pageSize:10}),r=_(!1),b=(a,n,s)=>{r.value=!0,d({url:d.adornUrl("/admin/hotSearch/page"),method:"get",params:d.adornParams(Object.assign({current:a?a.currentPage:1,size:a?a.pageSize:20},n))}).then(({data:u})=>{h.total=u.total,h.pageSize=u.size,h.currentPage=u.current,V.value=u.records,r.value=!1,s&&s()})},m=_([]),C=a=>{m.value=a},S=_(!1),I=_(null),k=a=>{S.value=!0,O(()=>{var n;(n=I.value)==null||n.init(a)})},v=(a,n)=>{b(h,a,n)},e=a=>{var s;const n=a.hotSearchId?[a.hotSearchId]:(s=m.value)==null?void 0:s.map(u=>u.hotSearchId);K.confirm(`确定进行[${a.hotSearchId?"删除":"批量删除"}]操作?`,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{d({url:d.adornUrl("/admin/hotSearch"),method:"delete",data:d.adornData(n,!1)}).then(()=>{w({message:"操作成功",type:"success",duration:1500,onClose:()=>{b()}})})}).catch(()=>{})},c=()=>{b(h)};return(a,n)=>{const s=L,u=j,D=Q("avue-crud");return g(),$("div",te,[l(D,{ref:"crudRef",page:t(h),data:t(V),"table-loading":t(r),option:t(W),onSearchChange:v,onOnLoad:b,onRefreshChange:c,onSelectionChange:C},{"menu-left":o(()=>[t(B)("admin:hotSearch:save")?(g(),y(s,{key:0,type:"primary",icon:"el-icon-plus",onClick:n[0]||(n[0]=f=>k())},{default:o(()=>[p(" 新增 ")]),_:1})):x("",!0),l(s,{type:"danger",disabled:t(m).length<=0,onClick:E(e,["stop"])},{default:o(()=>[p(" 批量删除 ")]),_:1},8,["disabled","onClick"])]),status:o(f=>[f.row.status===0?(g(),y(u,{key:0,type:"danger"},{default:o(()=>[p(" 未启用 ")]),_:1})):(g(),y(u,{key:1},{default:o(()=>[p(" 启用 ")]),_:1}))]),menu:o(f=>[t(B)("admin:hotSearch:update")?(g(),y(s,{key:0,type:"primary",icon:"el-icon-edit",onClick:U=>k(f.row.hotSearchId)},{default:o(()=>[p(" 修改 ")]),_:2},1032,["onClick"])):x("",!0),t(B)("admin:hotSearch:deconste")?(g(),y(s,{key:1,type:"danger",icon:"el-icon-deconste",onClick:E(U=>e(f.row,f.index),["stop"])},{default:o(()=>[p(" 删除 ")]),_:2},1032,["onClick"])):x("",!0)]),_:1},8,["page","data","table-loading","option"]),t(S)?(g(),y(ee,{key:0,ref_key:"addOrUpdateRef",ref:I,onRefreshDataList:b},null,512)):x("",!0)])}}};export{Qe as default};
